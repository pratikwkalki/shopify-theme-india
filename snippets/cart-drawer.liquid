{% comment %}
  Renders cart drawer

  Usage:
  {% render 'cart-drawer' %}
{% endcomment %}

{{ 'quantity-popover.css' | asset_url | stylesheet_tag }}
{{ 'component-card.css' | asset_url | stylesheet_tag }}
{{ 'cart-drawer.css' | asset_url | stylesheet_tag }}

{% if settings.upsell_collection != blank %}
  {{ 'cart-upsell.css' | asset_url | stylesheet_tag }}
{% endif %}

<script src="{{ 'cart.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'quantity-popover.js' | asset_url }}" defer="defer"></script>

<style>
  .drawer {
    visibility: hidden;
  }
</style>

<cart-drawer class="main-cart-drawer drawer{% if cart == empty %} is-empty{% endif %}">
  <div id="CartDrawer" class="cart-drawer">
    <div id="CartDrawer-Overlay" class="cart-drawer__overlay"></div>
    <div
      class="drawer__inner gradient color-{{ settings.cart_color_scheme }}"
      role="dialog"
      aria-modal="true"
      aria-label="{{ 'sections.cart.title' | t }}"
      tabindex="-1"
    >
      <div class="drawer__header">
        <div class="drawer__header-content drawer__content-wrap">
          <div class="h4 drawer__title">Your cart</div>
          <span class="drawer__item-count cart-link__bubble-num">Items {{ cart.item_count }}</span>
        </div>
        <button
          class="drawer__close"
          type="button"
          onclick="this.closest('cart-drawer').close()"
          aria-label="{{ 'accessibility.close' | t }}"
        >
          <svg width="17" height="16" viewBox="0 0 17 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0.878406 1.30018C0.817882 1.23966 0.769871 1.16781 0.737115 1.08873C0.704359 1.00965 0.6875 0.92489 0.6875 0.839295C0.6875 0.7537 0.704359 0.668944 0.737115 0.589864C0.769871 0.510785 0.817882 0.438931 0.878406 0.378406C0.938931 0.317882 1.01078 0.269871 1.08986 0.237115C1.16894 0.204359 1.2537 0.1875 1.3393 0.1875C1.42489 0.1875 1.50965 0.204359 1.58873 0.237115C1.66781 0.269871 1.73966 0.317882 1.80018 0.378406L8.5 7.07952L15.1998 0.378406C15.2603 0.317882 15.3322 0.269871 15.4113 0.237115C15.4904 0.204359 15.5751 0.1875 15.6607 0.1875C15.7463 0.1875 15.8311 0.204359 15.9101 0.237115C15.9892 0.269871 16.0611 0.317882 16.1216 0.378406C16.1821 0.438931 16.2301 0.510785 16.2629 0.589864C16.2956 0.668944 16.3125 0.7537 16.3125 0.839295C16.3125 0.92489 16.2956 1.00965 16.2629 1.08873C16.2301 1.16781 16.1821 1.23966 16.1216 1.30018L9.42048 8L16.1216 14.6998C16.1821 14.7603 16.2301 14.8322 16.2629 14.9113C16.2956 14.9904 16.3125 15.0751 16.3125 15.1607C16.3125 15.2463 16.2956 15.3311 16.2629 15.4101C16.2301 15.4892 16.1821 15.5611 16.1216 15.6216C16.0611 15.6821 15.9892 15.7301 15.9101 15.7629C15.8311 15.7956 15.7463 15.8125 15.6607 15.8125C15.5751 15.8125 15.4904 15.7956 15.4113 15.7629C15.3322 15.7301 15.2603 15.6821 15.1998 15.6216L8.5 8.92048L1.80018 15.6216C1.73966 15.6821 1.66781 15.7301 1.58873 15.7629C1.50965 15.7956 1.42489 15.8125 1.3393 15.8125C1.2537 15.8125 1.16894 15.7956 1.08986 15.7629C1.01078 15.7301 0.938931 15.6821 0.878406 15.6216C0.817882 15.5611 0.769871 15.4892 0.737115 15.4101C0.704359 15.3311 0.6875 15.2463 0.6875 15.1607C0.6875 15.0751 0.704359 14.9904 0.737115 14.9113C0.769871 14.8322 0.817882 14.7603 0.878406 14.6998L7.57952 8L0.878406 1.30018Z" fill="#403B39"/>
          </svg>        
        </button>
      </div>
      {% render 'progress-threshold' %}
      {%- if cart == empty -%}
        <div class="drawer__inner-empty">
          <div class="cart-drawer__warnings center{% if settings.cart_drawer_collection != blank %} cart-drawer__warnings--has-collection{% endif %}">
            <div class="cart-drawer__empty-content">
              <div class="content_wrap">
                <h4 class="cart__empty-text">Your cart is empty</h4>
                <p class="text">Shop our range, and start crafting your look</p>
              </div>

              <ul class="cart-menu">
                {%- for link in linklists[settings.choose_cart_menu].links %}
                  <li class="menu-item">
                    <a href="{{ link.url }}" class="menu-link">
                      {% assign menuAssets = shop.metaobjects.menu_assets %}
                      {% for menu_asset in menuAssets.values %}
                        {% assign menuTitle = menu_asset.title | strip | handleize %}
                        {% assign linkTitle = link.title | strip | handleize %}

                        {% if menuTitle == linkTitle and menu_asset.image != blank %}
                          <div class="img-wrap">
                            <img src="{{ menu_asset.image |  image_url: width: 49 }}" alt="{{ menu_asset.image.alt | default: link.title }}" loading="lazy" width="100" height="140">
                          </div>
                        {% endif %}
                      {% endfor %}
                      <span class="menu-title">{{ link.title }}</span>
                    </a>
                  </li>
                {%- endfor -%}
              </ul>
            </div>
          </div>
          {%- if settings.cart_drawer_collection != blank -%}
            <div class="cart-drawer__collection">
              {% render 'card-collection', card_collection: settings.cart_drawer_collection, columns: 1 %}
            </div>
          {%- endif -%}
        </div>
      {%- endif -%}
      <cart-drawer-items
        {% if cart == empty %}
          class=" is-empty"
        {% endif %}
      >
        <form
          action="{{ routes.cart_url }}"
          id="CartDrawer-Form"
          class="cart__contents cart-drawer__form"
          method="post"
        >
          <div id="CartDrawer-CartItems" class="drawer__contents js-contents">
            {%- if cart != empty -%}
              <div class="drawer__cart-items-wrapper">
                <table class="cart-items" role="table">
                  <tbody role="rowgroup" class="minicart_wrapper" data-csapp_line_wrapper>
                    {% assign discounTotalPrice = 0 %}
                    {%- for item in cart.items -%}
                      <tr id="CartDrawer-Item-{{ item.index | plus: 1 }}" class="cart-item minicart_index" role="row" data-csapp_line_index>
                        {%- for option in item.product.options_with_values -%}
                      {%- for value in option.values -%}
                        {% if option.name == 'Size' or option.name == 'Confi size' or option.name == 'Confi Size' %}
                        {% assign varSize = true %}
                        {% for variant in item.product.variants %}
                          {% if value contains 'Months' or value contains 'Years' %}
                            {% assign miniSizeContains = true %}
                          {% endif %}
                        {% endfor %}
                        {% if forloop.index == 1 %}
                          {% unless value contains 'Months' or value contains 'Years' %}
                            {% assign miniSize = true %}
                          {% endunless  %}
                        {% endif %}
                      {% endif %}
                      {% endfor %}
                    {% endfor %}
                    {%- if item.product.has_only_default_variant == false -%}
                      {%- for option in item.options_with_values -%}
                          {% if option.value contains 'Months' or option.value contains 'Years'  %}
                            {% assign itemVar = true %}
                          {% endif %}
                      {%- endfor -%}
                    {%- endif -%}
                    {% if varSize == true and miniSizeContains == true and miniSize == true and itemVar == true %}
                      {% assign miniItem = true %}
                    {% endif %}
                        <td class="cart-item__media" role="cell" headers="CartDrawer-ColumnProductImage">
                          {% if item.image %}
                            {% comment %} Leave empty space due to a:empty CSS display: none rule {% endcomment %}
                            <a href="{{ item.url }}{% if miniItem %}&miniSize=true{% endif %}" class="cart-item__link" tabindex="-1" aria-hidden="true"> </a>
                            <img
                              class="cart-item__image"
                              src="{{ item.image | image_url: width: 300 }}"
                              alt="{{ item.image.alt | escape | default: item.product.title }}"
                              loading="lazy"
                              width="150"
                              height="{{ 150 | divided_by: item.image.aspect_ratio | ceil }}"
                            >
                          {% endif %}
                        </td>

                        <td class="cart-item-details-wrap">
                          <div class="cart-item__details" role="cell" headers="CartDrawer-ColumnProduct" data-variant-id="{{ item.id }}" data-line-item-key="{{ item.key }}" data-line-item-index="{{ item.index }}" js-cart-item-details>
                            <div class="cart-item__details">
                              <div class="cart-item-header">
                                <a href="{{ item.url }}{% if miniItem %}&miniSize=true{% endif %}" class="cart-item__name h4 break">{{ item.quantity }} x {{ item.product.title | escape }}</a>
                                {% comment %} <div class="ssw-faveiticon sswfaveicon{{ item.product.id }} wishlist-icon">
                                  <i data-product-id="{{ item.product.id }}" data-count="0" class="ssw-fave-icon ssw-wishlist-element ssw-synchronized ssw-icon-heart-o" title="Add to Wishlist" data-params="{&quot;product_id&quot;:&quot;{{ item.product.id }}&quot;,&quot;event&quot;:&quot;fave_button&quot;,&quot;page&quot;:&quot;product_profile&quot;,&quot;title&quot;:&quot;{{ item.product.title }}&quot;,&quot;handle&quot;:&quot;{{ item.product.handle }}&quot;,&quot;first_variant_id&quot;:{{ item.variant.id }}}" tabindex="0" role="button" aria-label="Add to wishlist" data-variant-id="{{ item.variant.id }}"></i>
                                  <span class="faves-count" data-user-faves="{&quot;{{ item.variant.id }}&quot;:1}"></span>
                                  <script>
                                    if(typeof isGwHelperLoaded !== "undefined") {
                                        const initIcon = new CustomEvent("ssw.faveicon.init");
                                        window.dispatchEvent(initIcon);
                                    }
                                  </script>
                                </div> {% endcomment %}
                              </div>
                              {%- if settings.show_vendor -%}
                                <p class="caption-with-letter-spacing light">{{ item.product.vendor }}</p>
                              {%- endif -%}
  
                              <ul
                                class="discounts list-unstyled"
                                role="list"
                                aria-label="{{ 'customer.order.discount' | t }}"
                              >
                                {%- for discount in item.line_level_discount_allocations -%}
                                  <li class="discounts__discount">
                                    {%- render 'icon-discount' -%}
                                    {{ discount.discount_application.title }}
                                  </li>
                                {%- endfor -%}
                              </ul>
                            </div>
  
                            <div class="cart-item__totals right" role="cell" headers="CartDrawer-ColumnTotal"  data-csapp_line_price  data-csapp_discount_summery>
                              {%- render 'loading-spinner' -%}
                              <div class="cart-item__price-wrapper minicart_price">
                                {%- if item.original_line_price != item.final_line_price -%}
  
                                  {% if item.variant.compare_at_price > item.variant.price %}
                                    {% assign compareSavingsAmount = item.variant.compare_at_price | minus: item.final_price %}
                                    {% assign compareSavingsLineAmount = compareSavingsAmount | times: item.quantity %}
                                    {% assign compareSavingPercentage = compareSavingsAmount | times: 100 | divided_by: item.variant.compare_at_price %}
  
                                    {% assign savingPercentage = compareSavingPercentage %}
                                    {% assign discounTotalPrice = discounTotalPrice | plus: compareSavingsLineAmount %}
                                  {% else %}
                                    {% assign savingsAmount = item.original_line_price | minus: item.final_line_price %}
                                    {% assign savingPercentage = savingsAmount | times: 100 | divided_by: item.original_line_price %}
                                  {% endif %}
  
                                  <div class="cart-item__discounted-prices">
                                    <span class="visually-hidden">
                                      {{ 'products.product.price.sale_price' | t }}
                                    </span>
                                    <span class="price price--end">
                                      {{ item.final_line_price | money }}
                                    </span>
                                    <span class="visually-hidden">
                                      {{ 'products.product.price.regular_price' | t }}
                                    </span>
                                    <s class="cart-item__old-price price price--end">
                                      {% if item.variant.compare_at_price > item.variant.price %}
                                        MRP {{ item.variant.compare_at_price | times: item.quantity | money }}
                                      {% else %}
                                        MRP {{ item.original_line_price | money }}
                                      {% endif %}
                                    </s>
                                    <div class="saving-percentage">{{ savingPercentage }}% off</div>
                                  </div>
                                {% elsif item.variant.compare_at_price > item.variant.price %}
                                  {% assign savingsAmount = item.variant.compare_at_price | minus: item.original_price %}
                                  {% assign savingsLineAmount = savingsAmount | times: item.quantity %}
                                  {% assign savingPercentage = savingsAmount | times: 100 | divided_by: item.variant.compare_at_price %}
                                  {% assign discounTotalPrice = discounTotalPrice | plus: savingsLineAmount %}
                                  <div class="cart-item__discounted-prices">
                                    <span class="visually-hidden">
                                      {{ 'products.product.price.sale_price' | t }}
                                    </span>
                                    <span class="price price--end">
                                      {{ item.final_line_price | money }}
                                    </span>
                                    <span class="visually-hidden">
                                      {{ 'products.product.price.regular_price' | t }}
                                    </span>
                                    <s class="cart-item__old-price price price--end">
                                      MRP {{ item.variant.compare_at_price | times: item.quantity | money }}
                                    </s>
                                    <div class="saving-percentage">{{ savingPercentage }}% off</div>
                                  </div>
                                {%- else -%}
                                  <span class="price price--end ">
                                    <span class="price-mrp">MRP</span> {{ item.original_line_price | money }}
                                  </span>
                                {%- endif -%}
  
                                {%- if item.variant.available and item.unit_price_measurement -%}
                                  <div class="unit-price caption">
                                    <span class="visually-hidden">{{ 'products.product.price.unit_price' | t }}</span>
                                    {{ item.unit_price | money }}
                                    <span aria-hidden="true">/</span>
                                    <span class="visually-hidden"
                                      >&nbsp;{{ 'accessibility.unit_price_separator' | t }}&nbsp;</span
                                    >
                                    {%- if item.unit_price_measurement.reference_value != 1 -%}
                                      {{- item.unit_price_measurement.reference_value -}}
                                    {%- endif -%}
                                    {{ item.unit_price_measurement.reference_unit }}
                                  </div>
                                {%- endif -%}
                              </div>
                            </div>
                            
                            {%- for property in item.properties -%}
                              {% if property.first == 'Estimated delivery' %}
                                  {% assign estimated_delivery_date = property.last %}
                              {% endif %}
                            {% endfor %}
                            
                            {%- liquid
                              assign has_qty_rules = false
                              if item.variant.quantity_rule.increment > 1 or item.variant.quantity_rule.min > 1 or item.variant.quantity_rule.max != null
                                assign has_qty_rules = true
                              endif
  
                              assign has_vol_pricing = false
                              if item.variant.quantity_price_breaks.size > 0
                                assign has_vol_pricing = true
                              endif
                            -%}
                            <div
                              class="cart-item__quantity {% if has_qty_rules or has_vol_pricing %} cart-item__quantity--info{% endif %}"
                              role="cell"
                              headers="CartDrawer-ColumnQuantity"
                            >
                              <quantity-popover>
                                {%- if item.product.has_only_default_variant == false -%}
                                  {%- for option in item.options_with_values -%}
                                    {% if option.name == "Size" or option.name == "size" or option.name == "Confi Size" and option.name == "Confi size" %}
                                      <div class="product-option">
                                        <dt>{{ option.name }}:</dt>
                                        <dd>{{ option.value }}</dd>
                                      </div>
                                    {% endif %}
                                  {%- endfor -%}
                                {%- endif -%}
                                <div class="cart-item__quantity-wrapper quantity-popover-wrapper  {% if item.product.id == 8223122063514 or item.product.id == 8221267263642 or item.product.id == 14625967440235 %} upsell_product-hide {% endif %}">
                                  <div class="quantity-popover-container {% if has_qty_rules or has_vol_pricing %} quantity-popover-container--hover{% endif %}">
                                    <quantity-input class="quantity cart-quantity">
                                      <button class="quantity__button no-js-hidden" name="minus" type="button">
                                        <span class="visually-hidden">
                                          {{-
                                            'products.product.quantity.decrease'
                                            | t: product: item.product.title
                                            | escape
                                          -}}
                                        </span>
                                        <svg width="10" height="2" viewBox="0 0 10 2" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M10 0.25V1.75H0V0.25H10Z" fill="#777777"/>
                                        </svg>
                                      </button>
                                      <input
                                        class="quantity__input"
                                        type="number"
                                        data-quantity-variant-id="{{ item.variant.id }}"
                                        name="updates[]"
                                        value="{{ item.quantity }}"
                                        {% # theme-check-disable %}
                                        data-cart-quantity="{{ cart | item_count_for_variant: item.variant.id }}"
                                        min="{{ item.variant.quantity_rule.min }}"
                                        {% if item.variant.quantity_rule.max != null %}
                                          max="{{ item.variant.quantity_rule.max }}"
                                        {% endif %}
                                        step="{{ item.variant.quantity_rule.increment }}"
                                        {% # theme-check-enable %}
                                        aria-label="{{ 'products.product.quantity.input_label' | t: product: item.product.title | escape }}"
                                        id="Drawer-quantity-{{ item.index | plus: 1 }}"
                                        data-index="{{ item.index | plus: 1 }}"
                                      >
                                      <button class="quantity__button no-js-hidden" name="plus" type="button">
                                        <span class="visually-hidden">
                                          {{-
                                            'products.product.quantity.increase'
                                            | t: product: item.product.title
                                            | escape
                                          -}}
                                        </span>
                                        <svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M10 5.7037H5.7037V10H4.2963V5.7037H0V4.2963H4.2963V0H5.7037V4.2963H10V5.7037Z" fill="#313131"/>
                                        </svg>
                                      </button>
                                    </quantity-input>
                              </div>
                                  <cart-remove-button
                                    id="CartDrawer-Remove-{{ item.index | plus: 1 }}"
                                    data-index="{{ item.index | plus: 1 }}"
                                  >
                                    <button
                                      type="button"
                                      class="button button--tertiary cart-remove-button"
                                      aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}"
                                      data-variant-id="{{ item.variant.id }}"
                                    >
                                      <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M5.83303 19.1468L5.03028 5.5H19.9697L19.167 19.1468C19.0892 20.4682 17.995 21.5 16.6713 21.5H8.32872C7.00502 21.5 5.91076 20.4682 5.83303 19.1468Z" stroke="black"></path> <line x1="10" y1="9" x2="10" y2="18" stroke="black"></line> <line x1="15" y1="9" x2="15" y2="18" stroke="black"></line> <line x1="3.5" y1="5.5" x2="21.5" y2="5.5" stroke="black"></line> <path d="M8 4C8 3.17157 8.67157 2.5 9.5 2.5H15.5C16.3284 2.5 17 3.17157 17 4V5.5H8V4Z" stroke="black"></path> </svg>
                                    </button>
                                  </cart-remove-button>
                                </div>
                                {%- if has_qty_rules or has_vol_pricing -%}
                                  <button
                                    type="button"
                                    class="quantity-popover__info-button quantity-popover__info-button--icon-with-label button button--tertiary"
                                    aria-expanded="false"
                                  >
                                    {% render 'icon-info' %}
                                    <span>
                                      {%- if has_vol_pricing -%}
                                        {{ 'products.product.volume_pricing.note' | t }}
                                      {%- elsif has_qty_rules -%}
                                        {{ 'products.product.quantity.note' | t }}
                                      {%- endif -%}
                                    </span>
                                  </button>
                                {%- endif -%}
                                {%- if has_vol_pricing or has_qty_rules -%}
                                  <div
                                    class="cart-items__info global-settings-popup quantity-popover__info"
                                    tabindex="-1"
                                    hidden
                                  >
                                    {%- if has_qty_rules == false -%}
                                      <span class="volume-pricing-label caption">
                                        {{- 'products.product.volume_pricing.title' | t -}}
                                      </span>
                                    {%- endif -%}
                                    <div class="quantity__rules caption no-js-hidden">
                                      {%- if item.variant.quantity_rule.increment > 1 -%}
                                        <span class="divider">
                                          {{-
                                            'products.product.quantity.multiples_of'
                                            | t: quantity: item.variant.quantity_rule.increment
                                          -}}
                                        </span>
                                      {%- endif -%}
                                      {%- if item.variant.quantity_rule.min > 1 -%}
                                        <span class="divider">
                                          {{-
                                            'products.product.quantity.minimum_of'
                                            | t: quantity: item.variant.quantity_rule.min
                                          -}}
                                        </span>
                                      {%- endif -%}
                                      {%- if item.variant.quantity_rule.max != null -%}
                                        <span class="divider">
                                          {{-
                                            'products.product.quantity.maximum_of'
                                            | t: quantity: item.variant.quantity_rule.max
                                          -}}
                                        </span>
                                      {%- endif -%}
                                    </div>
                                    <button
                                      class="button-close button button--tertiary"
                                      type="button"
                                      aria-label="{{ 'accessibility.close' | t }}"
                                    >
                                      {%- render 'icon-close' -%}
                                    </button>
                                    {%- if item.variant.quantity_price_breaks.size > 0 -%}
                                      <volume-pricing class="parent-display">
                                        <ul class="list-unstyled">
                                          <li>
                                            <span>{{ item.variant.quantity_rule.min }}+</span>
                                            <span>{{ item.variant.price | money_with_currency }}/ea</span>
                                          </li>
                                          {%- for price_break in item.variant.quantity_price_breaks -%}
                                            <li>
                                              <span>
                                                {{- price_break.minimum_quantity -}}
                                                <span aria-hidden="true">+</span></span
                                              >
                                              <span>{{ price_break.price | money_with_currency }}/ea</span>
                                            </li>
                                          {%- endfor -%}
                                        </ul>
                                      </volume-pricing>
                                    {%- endif -%}
                                  </div>
                                {%- endif -%}
                                <div
                                  id="CartDrawer-LineItemError-{{ item.index | plus: 1 }}"
                                  class="cart-item__error"
                                  role="alert"
                                >
                                  <small class="cart-item__error-text"></small>
                                  <svg
                                    aria-hidden="true"
                                    focusable="false"
                                    class="icon icon-error"
                                    viewBox="0 0 13 13"
                                  >
                                    <circle cx="6.5" cy="6.50049" r="5.5" stroke="white" stroke-width="2"/>
                                    <circle cx="6.5" cy="6.5" r="5.5" fill="#EB001B" stroke="#EB001B" stroke-width="0.7"/>
                                    <path d="M5.87413 3.52832L5.97439 7.57216H7.02713L7.12739 3.52832H5.87413ZM6.50076 9.66091C6.88091 9.66091 7.18169 9.37267 7.18169 9.00504C7.18169 8.63742 6.88091 8.34917 6.50076 8.34917C6.12061 8.34917 5.81982 8.63742 5.81982 9.00504C5.81982 9.37267 6.12061 9.66091 6.50076 9.66091Z" fill="white"/>
                                    <path d="M5.87413 3.17832H5.51535L5.52424 3.537L5.6245 7.58083L5.63296 7.92216H5.97439H7.02713H7.36856L7.37702 7.58083L7.47728 3.537L7.48617 3.17832H7.12739H5.87413ZM6.50076 10.0109C7.06121 10.0109 7.5317 9.57872 7.5317 9.00504C7.5317 8.43137 7.06121 7.99918 6.50076 7.99918C5.94031 7.99918 5.46982 8.43137 5.46982 9.00504C5.46982 9.57872 5.94031 10.0109 6.50076 10.0109Z" fill="white" stroke="#EB001B" stroke-width="0.7">
                                  </svg>
                                </div>
                              </quantity-popover>
                              {%- if item.product.has_only_default_variant == false
                                or item.properties.size != 0
                                or item.selling_plan_allocation != null
                              -%}
                                {% unless item.product.id == 8223122063514 or item.product.id == 8221267263642 or item.product.id == 14625967440235 %}
                                  <button class="view-details-btn" onclick="toggleDetails(this, '{{ item.key }}');" type="button">
                                    View Details
                                  </button>
                                {% endunless %}
                                <dl id="cart-details-{{ item.key }}" style="display: none;">
                                  {%- if item.product.has_only_default_variant == false -%}
                                    {%- for option in item.options_with_values -%}
                                      {% unless option.name == "Size" or option.name == "size" or option.name == "Confi Size" and option.name == "Confi size" %}
                                        <div class="product-option">
                                          <dt>{{ option.name }}:</dt>
                                          <dd>{{ option.value }}</dd>
                                        </div>
                                      {% endunless %}
                                    {%- endfor -%}
                                  {%- endif -%}
                                  
                                  {%- for property in item.properties -%}
                                    {%- assign property_first_char = property.first | slice: 0 -%}
                                    {%- if property.last != blank  -%}
                                      {% assign hideClass = '' %}
                                      {% if property.first == '_Product category' or property.first == '_Compare at price for the product' or property.first == '_Discount on product' or property.first == '__shopify_send_gift_card_to_recipient' or property.first == '__shopify_offset' or property.first == '_Delivery days' %} 
                                         {% assign hideClass= 'hide' %}
                                      {% endif %}
                                      <div class="product-option {{ hideClass }} {% if property.first == '_ref_id' %} hide {% endif %}" data-property-first="{{ property.first }}" data-property-last="{{ property.last }}">
                                        {% if property.first == '_type' %}
                                          <span js-main-product></span>
                                        {% else %}
                                          <dt>{{ property.first }}:</dt>
                                          <dd>
                                            {%- if property.last contains '/uploads/' -%}
                                              <a href="{{ property.last }}" class="link" target="_blank">
                                                {{ property.last | split: '/' | last }}
                                              </a>
                                            {%- else -%}
                                              {{ property.last }}
                                            {%- endif -%}
                                          </dd>
                                        {% endif %}
                                      </div>
                                    {%- endif -%}
                                  {%- endfor -%} 
                                </dl>
  
                                <p class="product-option">{{ item.selling_plan_allocation.selling_plan.name }}</p>
                              {%- endif -%}
                            </div>
                          </div>
                        </td>
                      </tr>
                    {%- endfor -%}
                  </tbody>
                </table>
                <div class="shipping-text">
                  <div class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                      <path d="M12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23Z" fill="#F0FAF2"/>
                      <path d="M16 5.5H6C5.72386 5.5 5.5 5.72386 5.5 6V16C5.5 16.2761 5.72386 16.5 6 16.5H16C16.2761 16.5 16.5 16.2761 16.5 16V6C16.5 5.72386 16.2761 5.5 16 5.5Z" stroke="#223330"/>
                      <path d="M16.5 16.5007V8.59375L20.3173 9.24814C20.9576 9.3579 21.4544 9.86732 21.5482 10.5101L22.4218 16.5007H16.5Z" stroke="#223330"/>
                      <path d="M21 16.5C21 17.8807 19.8807 19 18.5 19C17.1193 19 16 17.8807 16 16.5C16 15.737 16.3418 15.0539 16.8806 14.5954C17.3168 14.2241 17.8822 14 18.5 14C19.8807 14 21 15.1193 21 16.5Z" fill="white"/>
                      <path d="M8.5 19C9.88071 19 11 17.8807 11 16.5C11 15.1193 9.88071 14 8.5 14C7.11929 14 6 15.1193 6 16.5C6 17.8807 7.11929 19 8.5 19Z" fill="white"/>
                      <path d="M8.5 18.5C9.60457 18.5 10.5 17.6046 10.5 16.5C10.5 15.3954 9.60457 14.5 8.5 14.5C7.39543 14.5 6.5 15.3954 6.5 16.5C6.5 17.6046 7.39543 18.5 8.5 18.5Z" stroke="#223330"/>
                      <path d="M18.5 18.5C19.6046 18.5 20.5 17.6046 20.5 16.5C20.5 15.3954 19.6046 14.5 18.5 14.5C17.3954 14.5 16.5 15.3954 16.5 16.5C16.5 17.6046 17.3954 18.5 18.5 18.5Z" stroke="#223330"/>
                      <path d="M2 9.5H8" stroke="#223330"/>
                      <path d="M3 12.5H8" stroke="#223330"/>
                      <path d="M2 8.5H7" stroke="white"/>
                      <path d="M2 11.5H7" stroke="white"/>
                    </svg>
                  </div>
                  <div class="text">Est. Delivery by: <strong>Wednesday, 31 Jan 2024.</strong></div>
                </div>
              </div>
            {%- endif -%}
            <p id="CartDrawer-LiveRegionText" class="visually-hidden" role="status"></p>
            <p id="CartDrawer-LineItemStatus" class="visually-hidden" aria-hidden="true" role="status">
              {{ 'accessibility.loading' | t }}
            </p>
          </div>
          <div id="CartDrawer-CartErrors" role="alert"></div>
        </form>
        {%- render 'cart-upsell' -%}
      </cart-drawer-items>                      
      <div class="drawer__footer">
        {%- if settings.show_cart_note -%}
          <details id="Details-CartDrawer">
            <summary>
              <span class="summary__title">
                {{ 'sections.cart.note' | t }}
                {% render 'icon-caret' %}
              </span>
            </summary>
            <cart-note class="cart__note field">
              <label class="visually-hidden" for="CartDrawer-Note">{{ 'sections.cart.note' | t }}</label>
              <textarea
                id="CartDrawer-Note"
                class="text-area text-area--resize-vertical field__input"
                name="note"
                placeholder="{{ 'sections.cart.note' | t }}"
              >{{ cart.note }}</textarea>
            </cart-note>
          </details>
        {%- endif -%}

        <!-- Start blocks -->
        <!-- Subtotals -->

        <div class="cart-drawer__footer" {{ block.shopify_attributes }}>
          <div>
            {%- if cart.cart_level_discount_applications.size > 0 -%}
              <ul class="discounts list-unstyled" role="list" aria-label="{{ 'customer.order.discount' | t }}">
                {%- for discount in cart.cart_level_discount_applications -%}
                  <li class="discounts__discount discounts__discount--end">
                    {%- render 'icon-discount' -%}
                    {{ discount.title }}
                    (-{{ discount.total_allocated_amount | money }})
                  </li>
                {%- endfor -%}
              </ul>
            {%- endif -%}
          </div>
          <div class="item_detail">
            <div class="promo">
              <h4 class="promo-text text">Promo code?</h4>
              <span class="promo-price">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
                  <path d="M14 7.99609H8V13.9961H6V7.99609H0V5.99609H6V-0.00390625H8V5.99609H14V7.99609Z" fill="black"/>
                </svg>
              </span>
            </div>

            {% assign subTotal = cart.original_total_price %}
            {% if discounTotalPrice > 0 %}
              {% assign subTotal = cart.original_total_price | plus: discounTotalPrice %}
              <div class="totals" role="status">
                <h4 class="totals__total text">Subtotal</h4>
                <p class="totals__total-value price">{{ subTotal | money }}</p>
              </div>

              <div class="discount">
                <h4 class="discount-text text">Discount on MRP</h4>
                <p class="discount-price price">- {{ discounTotalPrice | plus: cart.total_discount | money }}</p>
              </div>
            {% endif %}
            {% assign grandTotal = subTotal | minus: discounTotalPrice | minus: cart.total_discount %}
            <div class="grand-total">
              <h4 class="total-text text">
                Estimated total
              </h4>
              <p class="total-price price"><span class=" csapps-cart-original-total">{{ grandTotal | money }}</span></p>
            </div>
          </div>
        </div>

        <!-- CTAs -->

        <div class="cart__ctas" {{ block.shopify_attributes }}>
          <noscript>
            <button type="submit" class="cart__update-button button button--secondary" form="CartDrawer-Form">
              {{ 'sections.cart.update' | t }}
            </button>
          </noscript>

          <button
            type="submit"
            id="CartDrawer-Checkout"
            class="cart__checkout-button button"
            name="checkout"
            form="CartDrawer-Form"
            {% if cart == empty %}
              disabled
            {% endif %}
          >
            <span class="icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="13" height="14" viewBox="0 0 13 14" fill="none">
                <path d="M9.99844 4.9V3.5C9.99844 1.54 8.45844 0 6.49844 0C4.53844 0 2.99844 1.54 2.99844 3.5V4.9C1.80844 4.9 0.898438 5.81 0.898438 7V11.9C0.898438 13.09 1.80844 14 2.99844 14H9.99844C11.1884 14 12.0984 13.09 12.0984 11.9V7C12.0984 5.81 11.1884 4.9 9.99844 4.9ZM4.39844 3.5C4.39844 2.31 5.30844 1.4 6.49844 1.4C7.68844 1.4 8.59844 2.31 8.59844 3.5V4.9H4.39844V3.5ZM7.19844 10.5C7.19844 10.92 6.91844 11.2 6.49844 11.2C6.07844 11.2 5.79844 10.92 5.79844 10.5V8.4C5.79844 7.98 6.07844 7.7 6.49844 7.7C6.91844 7.7 7.19844 7.98 7.19844 8.4V10.5Z" fill="white"/>
              </svg>
            </span>
            Secure Checkout
          </button>

              
                  
          <div class="Header_drawer_mobile_bottom_2_new Header_drawer_mobile_bottom_cart_new">
            <a href="{{ routes.all_products_collection_url }}" class="button">
              Shop all products
            </a>
          </div>
        </div>


            <a href="{{ routes.cart_url }}" class="button cart-drawer-view-cart">
              {{ 'general.cart.view_cart' | t }}
            </a>  
                  
        <small class="tax-note caption-large rte">
            Enjoy Free Shipping across the India* â€¢ 5 Days Easy Returns*
        </small>
        {% if settings.drawer_highlight_text != blank %}
          <span id="drawer-highlight_text">{{ settings.drawer_highlight_text }}</span>
        {% endif %}
        {% if settings.drawer_payment_heading_text != blank or  settings.drawer_payment_icons != blank %}
          <div class="cart-drawer-payment-icons">
            <span>{{ settings.drawer_payment_heading_text }}</span>
            {{ settings.drawer_payment_icons | image_url: width: 374 | image_tag: widths: '374', loading: 'lazy' }}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</cart-drawer>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    function isIE() {
      const ua = window.navigator.userAgent;
      const msie = ua.indexOf('MSIE ');
      const trident = ua.indexOf('Trident/');

      return msie > 0 || trident > 0;
    }

    if (!isIE()) return;
    const cartSubmitInput = document.createElement('input');
    cartSubmitInput.setAttribute('name', 'checkout');
    cartSubmitInput.setAttribute('type', 'hidden');
    document.querySelector('#cart').appendChild(cartSubmitInput);
    document.querySelector('#checkout').addEventListener('click', function (event) {
      document.querySelector('#cart').submit();
    });
  });
  function toggleDetails(button, itemKey) {
    var detailsDiv = document.getElementById('cart-details-' + itemKey);
    if (!detailsDiv) {
      return;
    }
    if (detailsDiv.style.display === 'none') {
      detailsDiv.style.display = 'block';
      button.textContent = 'Hide Details';
      button.classList.add('active');
    } else {
      detailsDiv.style.display = 'none';
      button.textContent = 'View Details';
      button.classList.remove('active');
    }
  }
</script>